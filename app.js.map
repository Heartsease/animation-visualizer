{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/macgyvr/src/baseapplication.js","node_modules/macgyvr/src/baseconfig.js","node_modules/macgyvr/src/basegroup.js","node_modules/macgyvr/src/utils/eventlistener.js","src/app.js","src/io/gltfexploder.js","src/io/gltffileloader.js","src/objects/gltfobject.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import BaseConfig from './baseconfig.js';\nimport BaseGroup from './basegroup.js';\n\nexport default class BaseApplication {\n    constructor(el, cfg) {\n        this.appConfig = BaseConfig.apply(cfg);\n        this.element = el;\n        this.engine = new BABYLON.Engine(this.element, this.appConfig.engine.antialias, this.appConfig.engine.options);\n        this.engine.enableOfflineSupport = false;\n        this.scene = new BABYLON.Scene(this.engine);\n        this.scene.useRightHandedSystem = this.appConfig.scene.useRightHandedSystem;\n\n        this.isApplication = true;\n        this.engine.runRenderLoop( () => this.tick() );\n\n        this.cameras = [];\n        this.lights = [];\n\n        if (this.appConfig.camera) {\n            this.addCamera(this.appConfig.camera.type, this.appConfig.camera.position);\n        }\n\n        if (this.appConfig.lights) {\n            this.addLights(this.appConfig.lights);\n        }\n\n        if (this.appConfig.inspector) {\n            document.addEventListener('keydown', e => this.onKeyDown(e) );\n        }\n        this.root = new BaseGroup();\n        this.root.parent = this;\n        this.root.initializeGroup(this.scene, 'application-root');\n        this.root.onParented(this.scene, this, this.element);\n        this.onCreate(this.scene);\n\n        window.addEventListener('resize', () => this.onResize());\n\n        this.initialized = true;\n    }\n\n    get canvas() { return this.element; }\n\n    get name() { return 'root'; }\n\n    /**\n     * convenience method to add a typical camera\n     */\n    addCamera(type, options) {\n        if (!type) {\n            type = 'freecamera';\n        }\n\n        if (!options.position) {\n            options.position = new BABYLON.Vector3(0, 0, 0);\n        }\n\n        let camera;\n        switch (type) {\n            case 'default':\n            case 'freecamera':\n                camera = new BABYLON.FreeCamera('camera', options.position, this.scene);\n                camera.setTarget(BABYLON.Vector3.Zero());\n                camera.attachControl(this.element, true);\n                break;\n\n            case 'arcrotate':\n                camera = new BABYLON.ArcRotateCamera(\"ArcRotateCamera\", 0, 0, 0, BABYLON.Vector3.Zero(), this.scene);\n                camera.attachControl(this.element, true);\n                camera.setPosition(options.position);\n                break;\n\n            default:\n                console.error('Camera not added, ', type, ' is not found');\n        }\n        this.cameras.push(camera);\n    }\n\n    /**\n     * convenience method to add a typical light\n     */\n    addLights() {\n        let light = new BABYLON.HemisphericLight(\"light1\", new BABYLON.Vector3(0, 1, 0), this.scene);\n        light.intensity = 0.7;\n\n    }\n\n    get config() {\n        return this.appConfig;\n    }\n\n    /**\n     * render engine tick\n     */\n    tick() {\n        if (this.initialized && this.cameras.length > 0) {\n            this.scene.render();\n            this.onRender(this.engine.getDeltaTime());\n        }\n    }\n\n    /**\n     * replace all scenes starting with application and spidering through children, restarting all render loops\n     * @param scene\n     * @param children\n     */\n    replaceAllScenes(scene, children) {\n        if (!children) {\n            this.engine.stopRenderLoop();\n            this.engine.runRenderLoop( () => this.tick() );\n\n            this.scene = scene;\n            this.root.scene = scene;\n            children = this.root.children;\n        }\n        for (let c = 0; c < children.length; c++) {\n            if (children[c].isGroup) {\n                children[c].scene = scene;\n            }\n\n            if (children[c].children && children[c].children.length > 0) {\n                this.replaceAllScenes(scene, children[c].children);\n            }\n        }\n    }\n\n    add(objects) { return this.root.add(objects); }\n    remove(objects) { return this.root.remove(objects); }\n    removeAll(objects) { this.root.removeAll(objects); }\n    find(name) { return this.root.find(name); }\n\n    onKeyDown(e) {\n        if (this.config.inspector) {\n            if (e.keyCode === this.config.inspector || String.fromCharCode(e.keyCode).toLowerCase() === this.config.inspector ) {\n                if (this.scene.debugLayer.isVisible()) {\n                    this.scene.debugLayer.hide();\n                } else {\n                    this.scene.debugLayer.show();\n                }\n            }\n        }\n    }\n\n    onResize() {\n        this.engine.resize();\n    }\n\n    onCreate(sceneEl) {}\n    onRender(time) {}\n}\n","export default {\n    default: {\n        scene: {\n           useRightHandedSystem: false,\n        },\n        engine: {\n            antialias: true,\n            options: {}\n        },\n        camera: {\n            type: 'freecamera',\n            position: {\n                x: 0,\n                y: 0,\n                z: 0\n            }\n        },\n        inspector: 'i'\n    },\n\n    apply(cfg, node) {\n        if (!node) {\n            node = this.default;\n        }\n        for (let c in node) {\n            if (!cfg[c]) {\n                cfg[c] = node[c];\n            } else {\n                if (typeof cfg[c] === 'object') {\n                    cfg[c] = this.apply(cfg[c], node[c]);\n                }\n            }\n        }\n\n        return cfg;\n    }\n}\n","import EventListener from './utils/eventlistener.js';\nexport default class BaseGroup extends EventListener {\n    constructor(params) {\n        super();\n        this._config = params;\n        this._children = [];\n        this.isGroup = true;\n    }\n\n    init() {\n        this.onCreate(this.config);\n    }\n\n    /**\n     * get name of group\n     */\n    get name() {\n        return this.constructor.name;\n    }\n\n    /**\n     * get app config\n     * @returns {*}\n     */\n    get appConfig() {\n        return this.application.appConfig;\n    }\n\n    /**\n     * get config\n     * @returns {*}\n     */\n    get config() {\n        return this._config;\n    }\n\n    initializeGroup(scene, name) {\n        if (!name) {\n            name = this.constructor.name + '-group';\n        }\n        this._group = new BABYLON.Mesh(name, scene);\n    }\n\n    onParented(scene, parent, canvas) {\n        this.scene = scene;\n        this._canvas = canvas;\n        this.onCreate(scene);\n    }\n\n    /**\n     * overridable methods\n     * leave empty to be a simple abstraction we don't have to call super on\n     * @param scene\n     */\n    onRender(scene, time) {};\n    onCreate(params) {};\n\n    /**\n     * add object to parent\n     * @param object\n     */\n    add(objects) {\n        let asArray = true;\n        if (objects.length === undefined) {\n            objects = [objects];\n            asArray = false;\n        }\n        for (let c = 0; c < objects.length; c++) {\n            if (objects[c].isGroup) {\n                if (!objects[c].group) {\n                    objects[c].initializeGroup(this.scene);\n                }\n                objects[c].parent = this;\n                objects[c].group.parent = this._group;\n            } else {\n                objects[c].parent = this._group;\n            }\n            this._children.push(objects[c]);\n            if (objects[c].onParented) {\n                objects[c].onParented(this._scene, this._group, this._canvas);\n            }\n        }\n\n        if (asArray) {\n            return objects;\n        } else {\n            return objects[0];\n        }\n    }\n\n    remove(objects) {\n        let asArray = true;\n        if (objects.length === undefined) {\n            objects = [objects];\n            asArray = false;\n        }\n\n        this._children = this.children.filter(val => !objects.includes(val));\n        for (let c = 0; c < objects.length; c++) {\n            this.scene.removeMesh(objects[c]);\n        }\n\n        if (asArray) {\n            return objects;\n        } else {\n            return objects[0];\n        }\n    }\n\n    removeAll() {\n        for (let c = 0; c < this._children.length; c++) {\n            this._children[c].dispose();\n        }\n        this._children = [];\n    }\n\n    find(name) {\n        for (let c = 0; c < this._children.length; c++) {\n            if (this._children[c].name === name) {\n                return this._children[c];\n            }\n        }\n        return null;\n    }\n\n    get application() {\n        let parent = this.parent;\n        while (parent) {\n            if (parent.isApplication) {\n                return parent;\n            }\n            parent = parent.parent;\n        }\n    }\n\n    /**\n     * get parent group object\n     * @returns {THREE.Object3D}\n     */\n    get group() {\n        return this._group;\n    }\n\n    get canvas() {\n        return this._canvas;\n    }\n\n    /**\n     * get engine\n     */\n    get engine() {\n        return this._scene._engine;\n    }\n\n    /**\n     * get babylon scene\n     */\n    get scene() {\n        return this._scene;\n    }\n\n    /**\n     * set scene and rewire render loop for scene\n     * @param val\n     */\n    set scene(val) {\n        if (this.scene) {\n            //console.log(this.engine, this.name);\n        }\n        if (this._scene && this._scene._engine) {\n            this._scene._engine.stopRenderLoop();\n        }\n        this._scene = val;\n        this._scene._engine.runRenderLoop( () => this.tick() );\n    }\n\n    /**\n     * get children of this group\n     * @returns {Array}\n     */\n    get children() {\n        return this._children;\n    }\n\n    /**\n     * render loop\n     */\n    tick() {\n        //console.log('tick', this.name)\n        this.onRender(this.scene._engine.getDeltaTime());\n    }\n}\n","export default class EventListener {\n    constructor() {\n        /**\n         * event listeners\n         * @type {Array}\n         * @private\n         */\n        this._listeners = [];\n    }\n\n    /**\n     * add event listener\n     * @param type\n     * @param cb\n     * @returns {{type: *, callback: *}}\n     */\n    addListener(type, cb) {\n        let listener = { type: type, callback: cb };\n        this._listeners.push(listener);\n        return listener;\n    }\n\n    /**\n     * remove event listener\n     * @param listener\n     */\n    removeListener(listener) {\n        for (let c = 0; c < this._listeners.length; c++) {\n            if (listener === this._listeners[c]) {\n                this._listeners.splice(c, 0);\n                return;\n            }\n        }\n    }\n\n    /**\n     * trigger event\n     * @param type\n     * @param params\n     */\n    triggerEvent(type, params) {\n        this._listeners.forEach( function(l) {\n            if (type == l.type) {\n                l.callback.apply(this, [type, params]);\n            }\n        });\n    }\n}\n","import GLTFFileLoader from './io/gltffileloader.js';\nimport GLTFExploder from './io/gltfexploder.js';\nimport BaseApplication from '../node_modules/macgyvr/src/baseapplication.js';\nimport GLTFObject from './objects/gltfobject.js';\n\nexport default class Application extends BaseApplication {\n\n    set time(t) {\n        this._currentTime = t;\n\n        if (this.gltf) {\n            this.gltf.time = t;\n        }\n\n        if (this.config.components.timeline) {\n            this.config.components.timeline.currentTime = t;\n        }\n\n        if (this.config.components.controls) {\n            this.config.components.controls.time = t;\n        }\n    }\n\n    get time() {\n        return this._currentTime;\n    }\n\n    onCreate(scene) {\n        this.config.components.timeline.addEventListener(AnimationTimeline.TRACK_SELECTED, e => this.onTrackSelection(e));\n        this.config.components.timeline.addEventListener(AnimationTimeline.SCRUB_TIMELINE, e => this.onScrubTimeline(e));\n        this.config.components.timeline.addEventListener(AnimationTimeline.TRACK_VISIBILITY_CHANGED, e => this.onTrackVisibilityChanged(e));\n        this.config.components.controls.addEventListener(AnimationPlaybackControls.CONTROL_CLICKED, e => this.onPlaybackControlClicked(e));\n        this.config.components.controls.addEventListener(AnimationPlaybackControls.LOAD_GLTF, e => this.loadFile(e));\n        this.config.components.samples.addEventListener(AnimationSampleGLTFs.SELECT_REMOTE_FILE, e => this.loadFile(e));\n        this.config.components.info.addEventListener(AnimationSceneInfo.SWITCH_COORDINATE_SYSTEM, e => this.switchCoordinateSystem(e));\n        this.time = 0;\n        this.playing = false;\n        this.gltf = this.add( new GLTFObject() );\n    }\n\n    loadFile(event) {\n        this.config.components.samples.style.display = 'none';\n\n        let loader = new GLTFFileLoader();\n        loader.addListener(GLTFFileLoader.LOADED, (eventtype, event) => this.onGLTFData(event));\n        if (typeof event === 'string') {\n            let uri = event;\n            this.config.components.info.setAttribute('filename', uri);\n            loader.loadRemote(uri);\n            this.gltf.load(uri);\n        } else if (event.detail.uri) {\n            this.config.components.info.setAttribute('filename', event.detail.uri);\n            loader.loadRemote(event.detail.uri);\n            this.gltf.load(event.detail.uri);\n        } else {\n            this.config.components.info.setAttribute('filename', event.detail.files[0].name);\n            loader.loadLocal(event.detail.files);\n            this.gltf.load(event.detail.inputevent);\n        }\n\n        this.gltf.time = this.time;\n    }\n\n    onGLTFData(event) {\n        let timeline = GLTFExploder.generateTimeline(event.gltf.animations);\n        this.config.components.timeline.data = timeline;\n        this.gltf.duration = timeline.duration;\n        this.config.components.controls.duration = timeline.duration;\n        this.config.components.nodes.data = event.gltf.nodes;\n    }\n\n    switchCoordinateSystem(event) {\n        this.gltf.useRightHandedSystem = event.detail.rightHanded;\n    }\n\n    onScrubTimeline(event) {\n        if (!event.detail.resumeplayback) {\n            this.playing = false;\n        }\n\n        this.time = event.detail.playbacktime;\n    }\n\n    onTrackSelection(event) {\n        this.config.components.nodes.selectNodeByName(event.detail.name);\n    }\n\n    onTrackVisibilityChanged(event) {\n        this.gltf.toggleVisibility(event.detail.visible, event.detail.name, event.detail.playbacktime);\n    }\n\n    onPlaybackControlClicked(event) {\n        this.playing = event.detail.isPlaying;\n\n        switch (event.detail.action) {\n            case AnimationPlaybackControls.STEP_FORWARD:\n                this.time += .01;\n                break;\n\n            case AnimationPlaybackControls.STEP_BACKWARD:\n                this.time -= .01;\n                break;\n\n            case AnimationPlaybackControls.FAST_FORWARD:\n                this.time += .1;\n                break;\n\n            case AnimationPlaybackControls.FAST_BACKWARD:\n                this.time -= .1;\n                break;\n        }\n    }\n\n    onRender(deltatime) {\n        if (this.playing) {\n            this.time += deltatime / 1000;\n        }\n    }\n\n}\n","// lots of approach in binary processing here stolen from Babylon\n// https://github.com/BabylonJS/Babylon.js/tree/master/loaders/src/glTF/2.0\n\n// Only supports mashing the animation buffer pieces into the GLTF object for now\nexport default {\n    explode(gltf) {\n        for (let f = 0; f < gltf.nodes.length; f++) {\n            if (!gltf.nodes[f].name) {\n                gltf.nodes[f].name = 'Node ' + Number(f+1) + ' (unnamed)';\n            }\n        }\n        for (let c = 0; c < gltf.animations.length; c++) {\n            // wire sampler references within channels for easy access\n            for (let d = 0; d < gltf.animations[c].channels.length; d++) {\n                gltf.animations[c].channels[d]._samplerRef = gltf.animations[c].samplers[gltf.animations[c].channels[d].sampler];\n                gltf.animations[c].channels[d]._samplerRef._channelRef = gltf.animations[c].channels[d];\n                gltf.animations[c].channels[d].target._nodeRef = gltf.nodes[gltf.animations[c].channels[d].target.node];\n            }\n\n            // get accessor references for samplers and resolve data from buffer\n            for (let e = 0; e < gltf.animations[c].samplers.length; e++) {\n               gltf.animations[c].samplers[e]._inputRef = gltf.accessors[gltf.animations[c].samplers[e].input];\n\n               // for animation, input refers to keyframe times\n               gltf.animations[c].samplers[e]._inputValues = this._resolveAnimationSamplerData('keyframes', gltf, gltf.animations[c].samplers[e]._inputRef);\n\n\n               // output refers to scale, rotate, or translate\n               gltf.animations[c].samplers[e]._outputRef = gltf.accessors[gltf.animations[c].samplers[e].output];\n               gltf.animations[c].samplers[e]._outputRef._bufferViewRef = gltf.bufferViews[gltf.animations[c].samplers[e]._outputRef.bufferView];\n\n               let transformType = gltf.animations[c].samplers[e]._channelRef.target.path;\n               gltf.animations[c].samplers[e]._outputValues = this._resolveAnimationSamplerData(transformType, gltf, gltf.animations[c].samplers[e]._outputRef);\n            }\n        }\n        return gltf;\n    },\n\n    _resolveAnimationSamplerData(type, gltf, samplerData) {\n        let bufferView = gltf.bufferViews[samplerData.bufferView];\n        let buffer = gltf.buffers[bufferView.buffer].data;\n\n        // map bufferView to actual mem ref\n        samplerData._bufferViewRef = bufferView;\n\n        let byteOffset = bufferView.byteOffset;\n        if (samplerData.byteOffset) {\n            byteOffset += samplerData.byteOffset;\n        }\n        let byteLength = samplerData.count * this._getByteStrideFromType(samplerData);\n        let values = this._parseBufferData(buffer, byteOffset, byteLength, samplerData.componentType);\n\n        if (type === 'keyframes') {\n            return values;\n        } else {\n            let counter = 0;\n            let transforms = [];\n            let vec;\n\n            for (let c = 0; c < values.length; c++) {\n                switch (counter) {\n                    case 0:\n                        transforms.push({});\n                        vec = transforms[transforms.length-1];\n                        vec.x = values[c];\n                        counter ++;\n                        break;\n\n                    case 1:\n                        vec.y = values[c];\n                        counter ++;\n                        break;\n\n                    case 2:\n                        vec.z = values[c];\n\n                        counter ++;\n                        if (type !== 'rotation') {\n                            counter = 0;\n                        }\n                        break;\n\n                    case 3:\n                        vec.w = values[c];\n                        counter = 0;\n                        break;\n                }\n            }\n            return transforms;\n        }\n    },\n\n    _getByteStrideFromType(accessor) {\n        switch (accessor.type) {\n            case \"SCALAR\":\n                return 1;\n            case \"VEC2\":\n                return 2;\n            case \"VEC3\":\n                return 3;\n            case \"VEC4\":\n                return 4;\n            case \"MAT2\":\n                return 4;\n            case \"MAT3\":\n                return 9;\n            case \"MAT4\":\n                return 16;\n            default:\n                console.warn(\"Invalid accessor type (\" + accessor.type + \")\");\n                return 0;\n        }\n    },\n\n    _parseBufferData(buffer, byteOffset, byteLength, componentType) {\n        let bufferViewData;\n        switch (componentType) {\n            case this.EComponentType.BYTE:\n                bufferViewData = new Int8Array(buffer, byteOffset, byteLength);\n                break;\n            case this.EComponentType.UNSIGNED_BYTE:\n                bufferViewData = new Uint8Array(buffer, byteOffset, byteLength);\n                break;\n            case this.EComponentType.SHORT:\n                bufferViewData = new Int16Array(buffer, byteOffset, byteLength);\n                break;\n            case this.EComponentType.UNSIGNED_SHORT:\n                bufferViewData = new Uint16Array(buffer, byteOffset, byteLength);\n                break;\n            case this.EComponentType.UNSIGNED_INT:\n                bufferViewData = new Uint32Array(buffer, byteOffset, byteLength);\n                break;\n            case this.EComponentType.FLOAT:\n                bufferViewData = new Float32Array(buffer, byteOffset, byteLength);\n                break;\n            default:\n                console.warn(\"Invalid component type (\" + componentType + \")\");\n                return;\n        }\n        return bufferViewData;\n    },\n\n    generateTimeline(gltfAnims) {\n        let start;\n        let end;\n        let timeline = { animations: [] };\n        for (let c = 0; c < gltfAnims.length; c++) {\n            let tracks = this._generateTracksForAnimation(gltfAnims[c]);\n            if (!start || start > tracks.start) {\n                start = tracks.start;\n            }\n            if (!end || end < tracks.end) {\n                end = tracks.end;\n            }\n            timeline.animations.push({ animation: tracks });\n        }\n\n        timeline.start = start;\n        timeline.end = end;\n        timeline.duration = end - start;\n        return timeline;\n    },\n\n    _generateTracksForAnimation(animation) {\n        let tracks = {};\n        let startTime = -1;\n        let endTime = -1;\n        for (let c = 0; c < animation.channels.length; c++) {\n            if (!tracks[animation.channels[c].target._nodeRef.name]) {\n                tracks[animation.channels[c].target._nodeRef.name] = [];\n            }\n\n            let currentChannel = tracks[animation.channels[c].target._nodeRef.name];\n\n            for (let d = 0; d < animation.channels[c]._samplerRef._inputValues.length; d++) {\n                let time = animation.channels[c]._samplerRef._inputValues[d];\n                if (startTime === -1 || time < startTime) {\n                    startTime = time;\n                }\n                if (endTime === -1 || time > endTime) {\n                    endTime = time;\n                }\n\n                let keyframe;\n                for (let e = 0; e < currentChannel.length; e++) {\n                    if (currentChannel[e].time === time) {\n                        keyframe = currentChannel[e];\n                    }\n                }\n                if (!keyframe) {\n                    keyframe = { time: time, transform: {}, name: animation.channels[c].target._nodeRef.name };\n                    currentChannel.push(keyframe);\n                }\n\n                let transformType = animation.channels[c].target.path;\n                keyframe.transform[transformType] = animation.channels[c]._samplerRef._outputValues[d];\n            }\n        }\n\n        return { start: startTime, end: endTime, duration: endTime-startTime, tracks: tracks };\n    },\n\n    EComponentType: {\n        BYTE: 5120,\n        UNSIGNED_BYTE: 5121,\n        SHORT: 5122,\n        UNSIGNED_SHORT: 5123,\n        UNSIGNED_INT: 5125,\n        FLOAT: 5126\n    }\n}\n","import GLTFExploder from './gltfexploder.js';\nimport EventListener from '../../node_modules/macgyvr/src/utils/eventlistener.js';\n\nexport default class GLTFFileLoader extends EventListener {\n    constructor() {\n        super();\n        this.bufferDictionary = {};\n        this.bufferCount = 0;\n    }\n\n    loadLocal(filerefs) {\n        for (let c = 0; c < filerefs.length; c++) {\n            let filename = filerefs[c].name;\n            if (filename.split('.')[filename.split('.').length-1].toLowerCase() === 'bin') {\n                let reader = new FileReader();\n                this.bufferCount ++;\n                reader.onload = e => {\n                    this.onBinLoaded(filename, e);\n                };\n                reader.readAsArrayBuffer(filerefs[c]);\n            } else if (filename.split('.')[filename.split('.').length-1].toLowerCase() === 'gltf') {\n                let reader = new FileReader();\n                reader.onload = e => {\n                    this.onGLTFLoaded(filename, e)\n                };\n                reader.readAsText(filerefs[c]);\n            }\n        }\n    }\n\n    loadRemote(path) {\n        this._filename = path.split('/')[path.split('/').length-1];\n        this._basepath = path.substr(0, path.indexOf(this._filename));\n        let loader = new XMLHttpRequest();\n        loader.open('GET', path, true);\n        loader.onload = data => {\n            this.gltf = JSON.parse(loader.response);\n            this.buffers = this.gltf.buffers;\n            for (let c = 0; c < this.buffers.length; c++) {\n                this.bufferCount ++;\n                let loader = new XMLHttpRequest();\n                loader.responseType = 'arraybuffer';\n                loader.open('GET', this._basepath + this.buffers[c].uri, true);\n                loader.onload = e => {\n                    this.onBinLoaded(this.buffers[c].uri, e);\n                };\n                loader.send();\n            }\n        };\n        loader.send();\n    }\n\n    onGLTFLoaded(filename, e) {\n        this.gltf = JSON.parse(e.target.result);\n        let loaded = this.checkLoadedFiles();\n        if (loaded) {\n            this.onLoadComplete();\n        }\n    }\n\n    onBinLoaded(filename, e) {\n        if (e.target.result) {\n            this.bufferDictionary[filename] = e.target.result;\n        } else if (e.target.response) {\n            this.bufferDictionary[filename] = e.target.response;\n        } else {\n            throw new Error(filename + ' cannot be loaded', e.target);\n        }\n        let loaded = this.checkLoadedFiles();\n        if (loaded) {\n            this.onLoadComplete();\n        }\n    }\n\n    onLoadComplete() {\n        for (let c = 0; c < this.gltf.buffers.length; c++) {\n            this.gltf.buffers[c].data = this.bufferDictionary[this.gltf.buffers[c].uri];\n        }\n\n        this.gltf = GLTFExploder.explode(this.gltf);\n        this.triggerEvent(GLTFFileLoader.LOADED, { gltf: this.gltf });\n    }\n\n    checkLoadedFiles() {\n        if (this.gltf && this.bufferCount === Object.keys(this.bufferDictionary).length) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n}\n\nGLTFFileLoader.LOADED = 'onGLTFLoaded';\n","import BaseGroup from '../../node_modules/macgyvr/src/basegroup.js';\n\nexport default class GLTFObject extends BaseGroup {\n    /**\n     * on create scene\n     * @param scene\n     * @param sceneinfo\n     */\n    onCreate(scene, sceneinfo) {\n        this._duration = 0;\n        this._currentTime = 0;\n        BABYLON.SceneLoader.ShowLoadingScreen = false;\n        this._useRightHandedCoordinates = false;\n        this.filesInput = new BABYLON.FilesInput(this.engine, this.scene, this.canvas, (scenefile, scene) => this.onSceneLoaded(scenefile, scene));\n    }\n\n    set useRightHandedSystem(val) {\n        this._useRightHandedCoordinates = val;\n        this.scene.useRightHandedSystem = val;\n    }\n\n    load(value) {\n        if (typeof value === 'string') {\n            let uri = value;\n            let filename = uri.split('/')[uri.split('/').length-1];\n            let basepath = uri.substr(0, uri.indexOf(filename));\n            let loader = new BABYLON.AssetsManager(this.scene);\n            loader.useDefaultLoadingScreen = false;\n            let task = loader.addMeshTask('task', '', basepath, filename);\n            task.onSuccess = asset => this.onMeshesLoaded(asset);\n            loader.load();\n        } else {\n            let event = value;\n            this.filesInput.loadFiles(event);\n        }\n    }\n\n    onMeshesLoaded(asset) {\n        this.add(asset.loadedMeshes);\n        if (this._useRightHandedCoordinates) {\n            this.group.rotation.x = Math.PI/2;\n        } else {\n            this.group.rotation.x = -Math.PI/2;\n        }\n        this.prepareScene(this.scene);\n    }\n\n    onSceneLoaded(scenefile, scene) {\n        this.application.replaceAllScenes(scene);\n        this.prepareScene(scene);\n    }\n\n    prepareScene(scene) {\n        // remove camera from scene to add our own\n        if (scene.activeCamera) {\n            scene.activeCamera.dispose();\n            scene.activeCamera = null;\n        }\n\n        scene.createDefaultCameraOrLight(true);\n        scene.activeCamera.attachControl(this.canvas);\n\n        if (scene.lights.length === 0) {\n            this.application.addLights();\n        }\n\n        // pause all to start - if synchronous, the scene doesn't seem to show up\n        setTimeout( function() {\n            for (let c = 0; c < scene.Animatables.length; c++) {\n                scene.Animatables[c].goToFrame(0);\n                scene.Animatables[c].pause();\n            }\n        }, 50);\n\n        let worldExtends = scene.getWorldExtends();\n        let sceneMidPoint;\n        if (this._useRightHandedCoordinates) {\n            sceneMidPoint = new BABYLON.Vector3((worldExtends.max.x + worldExtends.min.x)/2, worldExtends.max.y, (worldExtends.max.z + worldExtends.min.z)/2);\n        } else {\n            sceneMidPoint = new BABYLON.Vector3((worldExtends.max.x + worldExtends.min.x)/2, (worldExtends.max.y + worldExtends.min.y)/2, (worldExtends.max.z + worldExtends.min.z)/2);\n        }\n        scene.activeCamera.setTarget( sceneMidPoint );\n    }\n\n    set duration(dur) {\n        this._duration = dur;\n    }\n\n    get duration() {\n        return this._duration;\n    }\n\n    set time(t) {\n        t = t % this.duration;\n        this._currentTime = t;\n        for (let c = 0; c < this.scene.Animatables.length; c++) {\n            this.scene.Animatables[c].goToFrame(t);\n        }\n    }\n\n    toggleVisibility(visible, name) {\n        let milliseconds = this.scene._animationTime;\n        for (let c = 0; c < this.scene.Animatables.length; c++) {\n            //let frameRate = this.scene.Animatables[c]._animations[0].framePerSecond;\n            if (this.scene.Animatables[c].target.name === name) {\n                if (visible) {\n                    this.scene.Animatables[c].restart();\n                    this.scene.Animatables[c].goToFrame(10)\n                } else {\n                    this.scene.Animatables[c].pause();\n                }\n            }\n        }\n    }\n\n    onRender(deltatime) {}\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvbWFjZ3l2ci9zcmMvYmFzZWFwcGxpY2F0aW9uLmpzIiwibm9kZV9tb2R1bGVzL21hY2d5dnIvc3JjL2Jhc2Vjb25maWcuanMiLCJub2RlX21vZHVsZXMvbWFjZ3l2ci9zcmMvYmFzZWdyb3VwLmpzIiwibm9kZV9tb2R1bGVzL21hY2d5dnIvc3JjL3V0aWxzL2V2ZW50bGlzdGVuZXIuanMiLCJzcmMvYXBwLmpzIiwic3JjL2lvL2dsdGZleHBsb2Rlci5qcyIsInNyYy9pby9nbHRmZmlsZWxvYWRlci5qcyIsInNyYy9vYmplY3RzL2dsdGZvYmplY3QuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7OztBQ0FBOzs7O0FBQ0E7Ozs7Ozs7O0lBRXFCLGU7QUFDakIsNkJBQVksRUFBWixFQUFnQixHQUFoQixFQUFxQjtBQUFBOztBQUFBOztBQUNqQixhQUFLLFNBQUwsR0FBaUIscUJBQVcsS0FBWCxDQUFpQixHQUFqQixDQUFqQjtBQUNBLGFBQUssT0FBTCxHQUFlLEVBQWY7QUFDQSxhQUFLLE1BQUwsR0FBYyxJQUFJLFFBQVEsTUFBWixDQUFtQixLQUFLLE9BQXhCLEVBQWlDLEtBQUssU0FBTCxDQUFlLE1BQWYsQ0FBc0IsU0FBdkQsRUFBa0UsS0FBSyxTQUFMLENBQWUsTUFBZixDQUFzQixPQUF4RixDQUFkO0FBQ0EsYUFBSyxNQUFMLENBQVksb0JBQVosR0FBbUMsS0FBbkM7QUFDQSxhQUFLLEtBQUwsR0FBYSxJQUFJLFFBQVEsS0FBWixDQUFrQixLQUFLLE1BQXZCLENBQWI7QUFDQSxhQUFLLEtBQUwsQ0FBVyxvQkFBWCxHQUFrQyxLQUFLLFNBQUwsQ0FBZSxLQUFmLENBQXFCLG9CQUF2RDs7QUFFQSxhQUFLLGFBQUwsR0FBcUIsSUFBckI7QUFDQSxhQUFLLE1BQUwsQ0FBWSxhQUFaLENBQTJCO0FBQUEsbUJBQU0sTUFBSyxJQUFMLEVBQU47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QWEsR0FBRyxJQUFJLEtBQUEsQUFBSyxNQUFMLEFBQVcsWUFBL0IsQUFBMkMsUUFBM0MsQUFBbUQsS0FBSyxBQUNwRDtxQkFBQSxBQUFLLE1BQUwsQUFBVyxZQUFYLEFBQXVCLEdBQXZCLEFBQTBCLFVBQTFCLEFBQW9DLEFBQ3ZDO0FBQ0o7Ozs7Ozs7a0IsQUFoR2dCIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImltcG9ydCBCYXNlQ29uZmlnIGZyb20gJy4vYmFzZWNvbmZpZy5qcyc7XG5pbXBvcnQgQmFzZUdyb3VwIGZyb20gJy4vYmFzZWdyb3VwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFzZUFwcGxpY2F0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihlbCwgY2ZnKSB7XG4gICAgICAgIHRoaXMuYXBwQ29uZmlnID0gQmFzZUNvbmZpZy5hcHBseShjZmcpO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbDtcbiAgICAgICAgdGhpcy5lbmdpbmUgPSBuZXcgQkFCWUxPTi5FbmdpbmUodGhpcy5lbGVtZW50LCB0aGlzLmFwcENvbmZpZy5lbmdpbmUuYW50aWFsaWFzLCB0aGlzLmFwcENvbmZpZy5lbmdpbmUub3B0aW9ucyk7XG4gICAgICAgIHRoaXMuZW5naW5lLmVuYWJsZU9mZmxpbmVTdXBwb3J0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2NlbmUgPSBuZXcgQkFCWUxPTi5TY2VuZSh0aGlzLmVuZ2luZSk7XG4gICAgICAgIHRoaXMuc2NlbmUudXNlUmlnaHRIYW5kZWRTeXN0ZW0gPSB0aGlzLmFwcENvbmZpZy5zY2VuZS51c2VSaWdodEhhbmRlZFN5c3RlbTtcblxuICAgICAgICB0aGlzLmlzQXBwbGljYXRpb24gPSB0cnVlO1xuICAgICAgICB0aGlzLmVuZ2luZS5ydW5SZW5kZXJMb29wKCAoKSA9PiB0aGlzLnRpY2soKSApO1xuXG4gICAgICAgIHRoaXMuY2FtZXJhcyA9IFtdO1xuICAgICAgICB0aGlzLmxpZ2h0cyA9IFtdO1xuXG4gICAgICAgIGlmICh0aGlzLmFwcENvbmZpZy5jYW1lcmEpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkQ2FtZXJhKHRoaXMuYXBwQ29uZmlnLmNhbWVyYS50eXBlLCB0aGlzLmFwcENvbmZpZy5jYW1lcmEucG9zaXRpb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuYXBwQ29uZmlnLmxpZ2h0cykge1xuICAgICAgICAgICAgdGhpcy5hZGRMaWdodHModGhpcy5hcHBDb25maWcubGlnaHRzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmFwcENvbmZpZy5pbnNwZWN0b3IpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBlID0+IHRoaXMub25LZXlEb3duKGUpICk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yb290ID0gbmV3IEJhc2VHcm91cCgpO1xuICAgICAgICB0aGlzLnJvb3QucGFyZW50ID0gdGhpcztcbiAgICAgICAgdGhpcy5yb290LmluaXRpYWxpemVHcm91cCh0aGlzLnNjZW5lLCAnYXBwbGljYXRpb24tcm9vdCcpO1xuICAgICAgICB0aGlzLnJvb3Qub25QYXJlbnRlZCh0aGlzLnNjZW5lLCB0aGlzLCB0aGlzLmVsZW1lbnQpO1xuICAgICAgICB0aGlzLm9uQ3JlYXRlKHRoaXMuc2NlbmUpO1xuXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB0aGlzLm9uUmVzaXplKCkpO1xuXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGdldCBjYW52YXMoKSB7IHJldHVybiB0aGlzLmVsZW1lbnQ7IH1cblxuICAgIGdldCBuYW1lKCkgeyByZXR1cm4gJ3Jvb3QnOyB9XG5cbiAgICAvKipcbiAgICAgKiBjb252ZW5pZW5jZSBtZXRob2QgdG8gYWRkIGEgdHlwaWNhbCBjYW1lcmFcbiAgICAgKi9cbiAgICBhZGRDYW1lcmEodHlwZSwgb3B0aW9ucykge1xuICAgICAgICBpZiAoIXR5cGUpIHtcbiAgICAgICAgICAgIHR5cGUgPSAnZnJlZWNhbWVyYSc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIW9wdGlvbnMucG9zaXRpb24pIHtcbiAgICAgICAgICAgIG9wdGlvbnMucG9zaXRpb24gPSBuZXcgQkFCWUxPTi5WZWN0b3IzKDAsIDAsIDApO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGNhbWVyYTtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlICdkZWZhdWx0JzpcbiAgICAgICAgICAgIGNhc2UgJ2ZyZWVjYW1lcmEnOlxuICAgICAgICAgICAgICAgIGNhbWVyYSA9IG5ldyBCQUJZTE9OLkZyZWVDYW1lcmEoJ2NhbWVyYScsIG9wdGlvbnMucG9zaXRpb24sIHRoaXMuc2NlbmUpO1xuICAgICAgICAgICAgICAgIGNhbWVyYS5zZXRUYXJnZXQoQkFCWUxPTi5WZWN0b3IzLlplcm8oKSk7XG4gICAgICAgICAgICAgICAgY2FtZXJhLmF0dGFjaENvbnRyb2wodGhpcy5lbGVtZW50LCB0cnVlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnYXJjcm90YXRlJzpcbiAgICAgICAgICAgICAgICBjYW1lcmEgPSBuZXcgQkFCWUxPTi5BcmNSb3RhdGVDYW1lcmEoXCJBcmNSb3RhdGVDYW1lcmFcIiwgMCwgMCwgMCwgQkFCWUxPTi5WZWN0b3IzLlplcm8oKSwgdGhpcy5zY2VuZSk7XG4gICAgICAgICAgICAgICAgY2FtZXJhLmF0dGFjaENvbnRyb2wodGhpcy5lbGVtZW50LCB0cnVlKTtcbiAgICAgICAgICAgICAgICBjYW1lcmEuc2V0UG9zaXRpb24ob3B0aW9ucy5wb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ2FtZXJhIG5vdCBhZGRlZCwgJywgdHlwZSwgJyBpcyBub3QgZm91bmQnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhbWVyYXMucHVzaChjYW1lcmEpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGNvbnZlbmllbmNlIG1ldGhvZCB0byBhZGQgYSB0eXBpY2FsIGxpZ2h0XG4gICAgICovXG4gICAgYWRkTGlnaHRzKCkge1xuICAgICAgICBsZXQgbGlnaHQgPSBuZXcgQkFCWUxPTi5IZW1pc3BoZXJpY0xpZ2h0KFwibGlnaHQxXCIsIG5ldyBCQUJZTE9OLlZlY3RvcjMoMCwgMSwgMCksIHRoaXMuc2NlbmUpO1xuICAgICAgICBsaWdodC5pbnRlbnNpdHkgPSAwLjc7XG5cbiAgICB9XG5cbiAgICBnZXQgY29uZmlnKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcHBDb25maWc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogcmVuZGVyIGVuZ2luZSB0aWNrXG4gICAgICovXG4gICAgdGljaygpIHtcbiAgICAgICAgaWYgKHRoaXMuaW5pdGlhbGl6ZWQgJiYgdGhpcy5jYW1lcmFzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuc2NlbmUucmVuZGVyKCk7XG4gICAgICAgICAgICB0aGlzLm9uUmVuZGVyKHRoaXMuZW5naW5lLmdldERlbHRhVGltZSgpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHJlcGxhY2UgYWxsIHNjZW5lcyBzdGFydGluZyB3aXRoIGFwcGxpY2F0aW9uIGFuZCBzcGlkZXJpbmcgdGhyb3VnaCBjaGlsZHJlbiwgcmVzdGFydGluZyBhbGwgcmVuZGVyIGxvb3BzXG4gICAgICogQHBhcmFtIHNjZW5lXG4gICAgICogQHBhcmFtIGNoaWxkcmVuXG4gICAgICovXG4gICAgcmVwbGFjZUFsbFNjZW5lcyhzY2VuZSwgY2hpbGRyZW4pIHtcbiAgICAgICAgaWYgKCFjaGlsZHJlbikge1xuICAgICAgICAgICAgdGhpcy5lbmdpbmUuc3RvcFJlbmRlckxvb3AoKTtcbiAgICAgICAgICAgIHRoaXMuZW5naW5lLnJ1blJlbmRlckxvb3AoICgpID0+IHRoaXMudGljaygpICk7XG5cbiAgICAgICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcbiAgICAgICAgICAgIHRoaXMucm9vdC5zY2VuZSA9IHNjZW5lO1xuICAgICAgICAgICAgY2hpbGRyZW4gPSB0aGlzLnJvb3QuY2hpbGRyZW47XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCBjaGlsZHJlbi5sZW5ndGg7IGMrKykge1xuICAgICAgICAgICAgaWYgKGNoaWxkcmVuW2NdLmlzR3JvdXApIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbltjXS5zY2VuZSA9IHNjZW5lO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY2hpbGRyZW5bY10uY2hpbGRyZW4gJiYgY2hpbGRyZW5bY10uY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVwbGFjZUFsbFNjZW5lcyhzY2VuZSwgY2hpbGRyZW5bY10uY2hpbGRyZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYWRkKG9iamVjdHMpIHsgcmV0dXJuIHRoaXMucm9vdC5hZGQob2JqZWN0cyk7IH1cbiAgICByZW1vdmUob2JqZWN0cykgeyByZXR1cm4gdGhpcy5yb290LnJlbW92ZShvYmplY3RzKTsgfVxuICAgIHJlbW92ZUFsbChvYmplY3RzKSB7IHRoaXMucm9vdC5yZW1vdmVBbGwob2JqZWN0cyk7IH1cbiAgICBmaW5kKG5hbWUpIHsgcmV0dXJuIHRoaXMucm9vdC5maW5kKG5hbWUpOyB9XG5cbiAgICBvbktleURvd24oZSkge1xuICAgICAgICBpZiAodGhpcy5jb25maWcuaW5zcGVjdG9yKSB7XG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09PSB0aGlzLmNvbmZpZy5pbnNwZWN0b3IgfHwgU3RyaW5nLmZyb21DaGFyQ29kZShlLmtleUNvZGUpLnRvTG93ZXJDYXNlKCkgPT09IHRoaXMuY29uZmlnLmluc3BlY3RvciApIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zY2VuZS5kZWJ1Z0xheWVyLmlzVmlzaWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuZGVidWdMYXllci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2VuZS5kZWJ1Z0xheWVyLnNob3coKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvblJlc2l6ZSgpIHtcbiAgICAgICAgdGhpcy5lbmdpbmUucmVzaXplKCk7XG4gICAgfVxuXG4gICAgb25DcmVhdGUoc2NlbmVFbCkge31cbiAgICBvblJlbmRlcih0aW1lKSB7fVxufVxuIiwiZXhwb3J0IGRlZmF1bHQge1xuICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgc2NlbmU6IHtcbiAgICAgICAgICAgdXNlUmlnaHRIYW5kZWRTeXN0ZW06IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgICBlbmdpbmU6IHtcbiAgICAgICAgICAgIGFudGlhbGlhczogdHJ1ZSxcbiAgICAgICAgICAgIG9wdGlvbnM6IHt9XG4gICAgICAgIH0sXG4gICAgICAgIGNhbWVyYToge1xuICAgICAgICAgICAgdHlwZTogJ2ZyZWVjYW1lcmEnLFxuICAgICAgICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgICAgIHk6IDAsXG4gICAgICAgICAgICAgICAgejogMFxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBpbnNwZWN0b3I6ICdpJ1xuICAgIH0sXG5cbiAgICBhcHBseShjZmcsIG5vZGUpIHtcbiAgICAgICAgaWYgKCFub2RlKSB7XG4gICAgICAgICAgICBub2RlID0gdGhpcy5kZWZhdWx0O1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGMgaW4gbm9kZSkge1xuICAgICAgICAgICAgaWYgKCFjZmdbY10pIHtcbiAgICAgICAgICAgICAgICBjZmdbY10gPSBub2RlW2NdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNmZ1tjXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgY2ZnW2NdID0gdGhpcy5hcHBseShjZmdbY10sIG5vZGVbY10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjZmc7XG4gICAgfVxufVxuIiwiaW1wb3J0IEV2ZW50TGlzdGVuZXIgZnJvbSAnLi91dGlscy9ldmVudGxpc3RlbmVyLmpzJztcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhc2VHcm91cCBleHRlbmRzIEV2ZW50TGlzdGVuZXIge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl9jb25maWcgPSBwYXJhbXM7XG4gICAgICAgIHRoaXMuX2NoaWxkcmVuID0gW107XG4gICAgICAgIHRoaXMuaXNHcm91cCA9IHRydWU7XG4gICAgfVxuXG4gICAgaW5pdCgpIHtcbiAgICAgICAgdGhpcy5vbkNyZWF0ZSh0aGlzLmNvbmZpZyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZ2V0IG5hbWUgb2YgZ3JvdXBcbiAgICAgKi9cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IubmFtZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZXQgYXBwIGNvbmZpZ1xuICAgICAqIEByZXR1cm5zIHsqfVxuICAgICAqL1xuICAgIGdldCBhcHBDb25maWcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwcGxpY2F0aW9uLmFwcENvbmZpZztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZXQgY29uZmlnXG4gICAgICogQHJldHVybnMgeyp9XG4gICAgICovXG4gICAgZ2V0IGNvbmZpZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZztcbiAgICB9XG5cbiAgICBpbml0aWFsaXplR3JvdXAoc2NlbmUsIG5hbWUpIHtcbiAgICAgICAgaWYgKCFuYW1lKSB7XG4gICAgICAgICAgICBuYW1lID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lICsgJy1ncm91cCc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZ3JvdXAgPSBuZXcgQkFCWUxPTi5NZXNoKG5hbWUsIHNjZW5lKTtcbiAgICB9XG5cbiAgICBvblBhcmVudGVkKHNjZW5lLCBwYXJlbnQsIGNhbnZhcykge1xuICAgICAgICB0aGlzLnNjZW5lID0gc2NlbmU7XG4gICAgICAgIHRoaXMuX2NhbnZhcyA9IGNhbnZhcztcbiAgICAgICAgdGhpcy5vbkNyZWF0ZShzY2VuZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogb3ZlcnJpZGFibGUgbWV0aG9kc1xuICAgICAqIGxlYXZlIGVtcHR5IHRvIGJlIGEgc2ltcGxlIGFic3RyYWN0aW9uIHdlIGRvbid0IGhhdmUgdG8gY2FsbCBzdXBlciBvblxuICAgICAqIEBwYXJhbSBzY2VuZVxuICAgICAqL1xuICAgIG9uUmVuZGVyKHNjZW5lLCB0aW1lKSB7fTtcbiAgICBvbkNyZWF0ZShwYXJhbXMpIHt9O1xuXG4gICAgLyoqXG4gICAgICogYWRkIG9iamVjdCB0byBwYXJlbnRcbiAgICAgKiBAcGFyYW0gb2JqZWN0XG4gICAgICovXG4gICAgYWRkKG9iamVjdHMpIHtcbiAgICAgICAgbGV0IGFzQXJyYXkgPSB0cnVlO1xuICAgICAgICBpZiAob2JqZWN0cy5sZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgb2JqZWN0cyA9IFtvYmplY3RzXTtcbiAgICAgICAgICAgIGFzQXJyYXkgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IG9iamVjdHMubGVuZ3RoOyBjKyspIHtcbiAgICAgICAgICAgIGlmIChvYmplY3RzW2NdLmlzR3JvdXApIHtcbiAgICAgICAgICAgICAgICBpZiAoIW9iamVjdHNbY10uZ3JvdXApIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0c1tjXS5pbml0aWFsaXplR3JvdXAodGhpcy5zY2VuZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9iamVjdHNbY10ucGFyZW50ID0gdGhpcztcbiAgICAgICAgICAgICAgICBvYmplY3RzW2NdLmdyb3VwLnBhcmVudCA9IHRoaXMuX2dyb3VwO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvYmplY3RzW2NdLnBhcmVudCA9IHRoaXMuX2dyb3VwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fY2hpbGRyZW4ucHVzaChvYmplY3RzW2NdKTtcbiAgICAgICAgICAgIGlmIChvYmplY3RzW2NdLm9uUGFyZW50ZWQpIHtcbiAgICAgICAgICAgICAgICBvYmplY3RzW2NdLm9uUGFyZW50ZWQodGhpcy5fc2NlbmUsIHRoaXMuX2dyb3VwLCB0aGlzLl9jYW52YXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFzQXJyYXkpIHtcbiAgICAgICAgICAgIHJldHVybiBvYmplY3RzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG9iamVjdHNbMF07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW1vdmUob2JqZWN0cykge1xuICAgICAgICBsZXQgYXNBcnJheSA9IHRydWU7XG4gICAgICAgIGlmIChvYmplY3RzLmxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBvYmplY3RzID0gW29iamVjdHNdO1xuICAgICAgICAgICAgYXNBcnJheSA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fY2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuLmZpbHRlcih2YWwgPT4gIW9iamVjdHMuaW5jbHVkZXModmFsKSk7XG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgb2JqZWN0cy5sZW5ndGg7IGMrKykge1xuICAgICAgICAgICAgdGhpcy5zY2VuZS5yZW1vdmVNZXNoKG9iamVjdHNbY10pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFzQXJyYXkpIHtcbiAgICAgICAgICAgIHJldHVybiBvYmplY3RzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG9iamVjdHNbMF07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW1vdmVBbGwoKSB7XG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgdGhpcy5fY2hpbGRyZW4ubGVuZ3RoOyBjKyspIHtcbiAgICAgICAgICAgIHRoaXMuX2NoaWxkcmVuW2NdLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jaGlsZHJlbiA9IFtdO1xuICAgIH1cblxuICAgIGZpbmQobmFtZSkge1xuICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IHRoaXMuX2NoaWxkcmVuLmxlbmd0aDsgYysrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fY2hpbGRyZW5bY10ubmFtZSA9PT0gbmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jaGlsZHJlbltjXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBnZXQgYXBwbGljYXRpb24oKSB7XG4gICAgICAgIGxldCBwYXJlbnQgPSB0aGlzLnBhcmVudDtcbiAgICAgICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgICAgICAgaWYgKHBhcmVudC5pc0FwcGxpY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZXQgcGFyZW50IGdyb3VwIG9iamVjdFxuICAgICAqIEByZXR1cm5zIHtUSFJFRS5PYmplY3QzRH1cbiAgICAgKi9cbiAgICBnZXQgZ3JvdXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ncm91cDtcbiAgICB9XG5cbiAgICBnZXQgY2FudmFzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FudmFzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGdldCBlbmdpbmVcbiAgICAgKi9cbiAgICBnZXQgZW5naW5lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2NlbmUuX2VuZ2luZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZXQgYmFieWxvbiBzY2VuZVxuICAgICAqL1xuICAgIGdldCBzY2VuZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NjZW5lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHNldCBzY2VuZSBhbmQgcmV3aXJlIHJlbmRlciBsb29wIGZvciBzY2VuZVxuICAgICAqIEBwYXJhbSB2YWxcbiAgICAgKi9cbiAgICBzZXQgc2NlbmUodmFsKSB7XG4gICAgICAgIGlmICh0aGlzLnNjZW5lKSB7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMuZW5naW5lLCB0aGlzLm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9zY2VuZSAmJiB0aGlzLl9zY2VuZS5fZW5naW5lKSB7XG4gICAgICAgICAgICB0aGlzLl9zY2VuZS5fZW5naW5lLnN0b3BSZW5kZXJMb29wKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc2NlbmUgPSB2YWw7XG4gICAgICAgIHRoaXMuX3NjZW5lLl9lbmdpbmUucnVuUmVuZGVyTG9vcCggKCkgPT4gdGhpcy50aWNrKCkgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBnZXQgY2hpbGRyZW4gb2YgdGhpcyBncm91cFxuICAgICAqIEByZXR1cm5zIHtBcnJheX1cbiAgICAgKi9cbiAgICBnZXQgY2hpbGRyZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jaGlsZHJlbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZW5kZXIgbG9vcFxuICAgICAqL1xuICAgIHRpY2soKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2coJ3RpY2snLCB0aGlzLm5hbWUpXG4gICAgICAgIHRoaXMub25SZW5kZXIodGhpcy5zY2VuZS5fZW5naW5lLmdldERlbHRhVGltZSgpKTtcbiAgICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBFdmVudExpc3RlbmVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGV2ZW50IGxpc3RlbmVyc1xuICAgICAgICAgKiBAdHlwZSB7QXJyYXl9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9saXN0ZW5lcnMgPSBbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBhZGQgZXZlbnQgbGlzdGVuZXJcbiAgICAgKiBAcGFyYW0gdHlwZVxuICAgICAqIEBwYXJhbSBjYlxuICAgICAqIEByZXR1cm5zIHt7dHlwZTogKiwgY2FsbGJhY2s6ICp9fVxuICAgICAqL1xuICAgIGFkZExpc3RlbmVyKHR5cGUsIGNiKSB7XG4gICAgICAgIGxldCBsaXN0ZW5lciA9IHsgdHlwZTogdHlwZSwgY2FsbGJhY2s6IGNiIH07XG4gICAgICAgIHRoaXMuX2xpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICAgICAgcmV0dXJuIGxpc3RlbmVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHJlbW92ZSBldmVudCBsaXN0ZW5lclxuICAgICAqIEBwYXJhbSBsaXN0ZW5lclxuICAgICAqL1xuICAgIHJlbW92ZUxpc3RlbmVyKGxpc3RlbmVyKSB7XG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgdGhpcy5fbGlzdGVuZXJzLmxlbmd0aDsgYysrKSB7XG4gICAgICAgICAgICBpZiAobGlzdGVuZXIgPT09IHRoaXMuX2xpc3RlbmVyc1tjXSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2xpc3RlbmVycy5zcGxpY2UoYywgMCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogdHJpZ2dlciBldmVudFxuICAgICAqIEBwYXJhbSB0eXBlXG4gICAgICogQHBhcmFtIHBhcmFtc1xuICAgICAqL1xuICAgIHRyaWdnZXJFdmVudCh0eXBlLCBwYXJhbXMpIHtcbiAgICAgICAgdGhpcy5fbGlzdGVuZXJzLmZvckVhY2goIGZ1bmN0aW9uKGwpIHtcbiAgICAgICAgICAgIGlmICh0eXBlID09IGwudHlwZSkge1xuICAgICAgICAgICAgICAgIGwuY2FsbGJhY2suYXBwbHkodGhpcywgW3R5cGUsIHBhcmFtc10pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgR0xURkZpbGVMb2FkZXIgZnJvbSAnLi9pby9nbHRmZmlsZWxvYWRlci5qcyc7XG5pbXBvcnQgR0xURkV4cGxvZGVyIGZyb20gJy4vaW8vZ2x0ZmV4cGxvZGVyLmpzJztcbmltcG9ydCBCYXNlQXBwbGljYXRpb24gZnJvbSAnLi4vbm9kZV9tb2R1bGVzL21hY2d5dnIvc3JjL2Jhc2VhcHBsaWNhdGlvbi5qcyc7XG5pbXBvcnQgR0xURk9iamVjdCBmcm9tICcuL29iamVjdHMvZ2x0Zm9iamVjdC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwcGxpY2F0aW9uIGV4dGVuZHMgQmFzZUFwcGxpY2F0aW9uIHtcblxuICAgIHNldCB0aW1lKHQpIHtcbiAgICAgICAgdGhpcy5fY3VycmVudFRpbWUgPSB0O1xuXG4gICAgICAgIGlmICh0aGlzLmdsdGYpIHtcbiAgICAgICAgICAgIHRoaXMuZ2x0Zi50aW1lID0gdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5jb21wb25lbnRzLnRpbWVsaW5lKSB7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5jb21wb25lbnRzLnRpbWVsaW5lLmN1cnJlbnRUaW1lID0gdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5jb21wb25lbnRzLmNvbnRyb2xzKSB7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5jb21wb25lbnRzLmNvbnRyb2xzLnRpbWUgPSB0O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IHRpbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jdXJyZW50VGltZTtcbiAgICB9XG5cbiAgICBvbkNyZWF0ZShzY2VuZSkge1xuICAgICAgICB0aGlzLmNvbmZpZy5jb21wb25lbnRzLnRpbWVsaW5lLmFkZEV2ZW50TGlzdGVuZXIoQW5pbWF0aW9uVGltZWxpbmUuVFJBQ0tfU0VMRUNURUQsIGUgPT4gdGhpcy5vblRyYWNrU2VsZWN0aW9uKGUpKTtcbiAgICAgICAgdGhpcy5jb25maWcuY29tcG9uZW50cy50aW1lbGluZS5hZGRFdmVudExpc3RlbmVyKEFuaW1hdGlvblRpbWVsaW5lLlNDUlVCX1RJTUVMSU5FLCBlID0+IHRoaXMub25TY3J1YlRpbWVsaW5lKGUpKTtcbiAgICAgICAgdGhpcy5jb25maWcuY29tcG9uZW50cy50aW1lbGluZS5hZGRFdmVudExpc3RlbmVyKEFuaW1hdGlvblRpbWVsaW5lLlRSQUNLX1ZJU0lCSUxJVFlfQ0hBTkdFRCwgZSA9PiB0aGlzLm9uVHJhY2tWaXNpYmlsaXR5Q2hhbmdlZChlKSk7XG4gICAgICAgIHRoaXMuY29uZmlnLmNvbXBvbmVudHMuY29udHJvbHMuYWRkRXZlbnRMaXN0ZW5lcihBbmltYXRpb25QbGF5YmFja0NvbnRyb2xzLkNPTlRST0xfQ0xJQ0tFRCwgZSA9PiB0aGlzLm9uUGxheWJhY2tDb250cm9sQ2xpY2tlZChlKSk7XG4gICAgICAgIHRoaXMuY29uZmlnLmNvbXBvbmVudHMuY29udHJvbHMuYWRkRXZlbnRMaXN0ZW5lcihBbmltYXRpb25QbGF5YmFja0NvbnRyb2xzLkxPQURfR0xURiwgZSA9PiB0aGlzLmxvYWRGaWxlKGUpKTtcbiAgICAgICAgdGhpcy5jb25maWcuY29tcG9uZW50cy5zYW1wbGVzLmFkZEV2ZW50TGlzdGVuZXIoQW5pbWF0aW9uU2FtcGxlR0xURnMuU0VMRUNUX1JFTU9URV9GSUxFLCBlID0+IHRoaXMubG9hZEZpbGUoZSkpO1xuICAgICAgICB0aGlzLmNvbmZpZy5jb21wb25lbnRzLmluZm8uYWRkRXZlbnRMaXN0ZW5lcihBbmltYXRpb25TY2VuZUluZm8uU1dJVENIX0NPT1JESU5BVEVfU1lTVEVNLCBlID0+IHRoaXMuc3dpdGNoQ29vcmRpbmF0ZVN5c3RlbShlKSk7XG4gICAgICAgIHRoaXMudGltZSA9IDA7XG4gICAgICAgIHRoaXMucGxheWluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmdsdGYgPSB0aGlzLmFkZCggbmV3IEdMVEZPYmplY3QoKSApO1xuICAgIH1cblxuICAgIGxvYWRGaWxlKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuY29uZmlnLmNvbXBvbmVudHMuc2FtcGxlcy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgICAgIGxldCBsb2FkZXIgPSBuZXcgR0xURkZpbGVMb2FkZXIoKTtcbiAgICAgICAgbG9hZGVyLmFkZExpc3RlbmVyKEdMVEZGaWxlTG9hZGVyLkxPQURFRCwgKGV2ZW50dHlwZSwgZXZlbnQpID0+IHRoaXMub25HTFRGRGF0YShldmVudCkpO1xuICAgICAgICBpZiAodHlwZW9mIGV2ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgbGV0IHVyaSA9IGV2ZW50O1xuICAgICAgICAgICAgdGhpcy5jb25maWcuY29tcG9uZW50cy5pbmZvLnNldEF0dHJpYnV0ZSgnZmlsZW5hbWUnLCB1cmkpO1xuICAgICAgICAgICAgbG9hZGVyLmxvYWRSZW1vdGUodXJpKTtcbiAgICAgICAgICAgIHRoaXMuZ2x0Zi5sb2FkKHVyaSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuZGV0YWlsLnVyaSkge1xuICAgICAgICAgICAgdGhpcy5jb25maWcuY29tcG9uZW50cy5pbmZvLnNldEF0dHJpYnV0ZSgnZmlsZW5hbWUnLCBldmVudC5kZXRhaWwudXJpKTtcbiAgICAgICAgICAgIGxvYWRlci5sb2FkUmVtb3RlKGV2ZW50LmRldGFpbC51cmkpO1xuICAgICAgICAgICAgdGhpcy5nbHRmLmxvYWQoZXZlbnQuZGV0YWlsLnVyaSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5jb21wb25lbnRzLmluZm8uc2V0QXR0cmlidXRlKCdmaWxlbmFtZScsIGV2ZW50LmRldGFpbC5maWxlc1swXS5uYW1lKTtcbiAgICAgICAgICAgIGxvYWRlci5sb2FkTG9jYWwoZXZlbnQuZGV0YWlsLmZpbGVzKTtcbiAgICAgICAgICAgIHRoaXMuZ2x0Zi5sb2FkKGV2ZW50LmRldGFpbC5pbnB1dGV2ZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZ2x0Zi50aW1lID0gdGhpcy50aW1lO1xuICAgIH1cblxuICAgIG9uR0xURkRhdGEoZXZlbnQpIHtcbiAgICAgICAgbGV0IHRpbWVsaW5lID0gR0xURkV4cGxvZGVyLmdlbmVyYXRlVGltZWxpbmUoZXZlbnQuZ2x0Zi5hbmltYXRpb25zKTtcbiAgICAgICAgdGhpcy5jb25maWcuY29tcG9uZW50cy50aW1lbGluZS5kYXRhID0gdGltZWxpbmU7XG4gICAgICAgIHRoaXMuZ2x0Zi5kdXJhdGlvbiA9IHRpbWVsaW5lLmR1cmF0aW9uO1xuICAgICAgICB0aGlzLmNvbmZpZy5jb21wb25lbnRzLmNvbnRyb2xzLmR1cmF0aW9uID0gdGltZWxpbmUuZHVyYXRpb247XG4gICAgICAgIHRoaXMuY29uZmlnLmNvbXBvbmVudHMubm9kZXMuZGF0YSA9IGV2ZW50LmdsdGYubm9kZXM7XG4gICAgfVxuXG4gICAgc3dpdGNoQ29vcmRpbmF0ZVN5c3RlbShldmVudCkge1xuICAgICAgICB0aGlzLmdsdGYudXNlUmlnaHRIYW5kZWRTeXN0ZW0gPSBldmVudC5kZXRhaWwucmlnaHRIYW5kZWQ7XG4gICAgfVxuXG4gICAgb25TY3J1YlRpbWVsaW5lKGV2ZW50KSB7XG4gICAgICAgIGlmICghZXZlbnQuZGV0YWlsLnJlc3VtZXBsYXliYWNrKSB7XG4gICAgICAgICAgICB0aGlzLnBsYXlpbmcgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudGltZSA9IGV2ZW50LmRldGFpbC5wbGF5YmFja3RpbWU7XG4gICAgfVxuXG4gICAgb25UcmFja1NlbGVjdGlvbihldmVudCkge1xuICAgICAgICB0aGlzLmNvbmZpZy5jb21wb25lbnRzLm5vZGVzLnNlbGVjdE5vZGVCeU5hbWUoZXZlbnQuZGV0YWlsLm5hbWUpO1xuICAgIH1cblxuICAgIG9uVHJhY2tWaXNpYmlsaXR5Q2hhbmdlZChldmVudCkge1xuICAgICAgICB0aGlzLmdsdGYudG9nZ2xlVmlzaWJpbGl0eShldmVudC5kZXRhaWwudmlzaWJsZSwgZXZlbnQuZGV0YWlsLm5hbWUsIGV2ZW50LmRldGFpbC5wbGF5YmFja3RpbWUpO1xuICAgIH1cblxuICAgIG9uUGxheWJhY2tDb250cm9sQ2xpY2tlZChldmVudCkge1xuICAgICAgICB0aGlzLnBsYXlpbmcgPSBldmVudC5kZXRhaWwuaXNQbGF5aW5nO1xuXG4gICAgICAgIHN3aXRjaCAoZXZlbnQuZGV0YWlsLmFjdGlvbikge1xuICAgICAgICAgICAgY2FzZSBBbmltYXRpb25QbGF5YmFja0NvbnRyb2xzLlNURVBfRk9SV0FSRDpcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWUgKz0gLjAxO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIEFuaW1hdGlvblBsYXliYWNrQ29udHJvbHMuU1RFUF9CQUNLV0FSRDpcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWUgLT0gLjAxO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIEFuaW1hdGlvblBsYXliYWNrQ29udHJvbHMuRkFTVF9GT1JXQVJEOlxuICAgICAgICAgICAgICAgIHRoaXMudGltZSArPSAuMTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBBbmltYXRpb25QbGF5YmFja0NvbnRyb2xzLkZBU1RfQkFDS1dBUkQ6XG4gICAgICAgICAgICAgICAgdGhpcy50aW1lIC09IC4xO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25SZW5kZXIoZGVsdGF0aW1lKSB7XG4gICAgICAgIGlmICh0aGlzLnBsYXlpbmcpIHtcbiAgICAgICAgICAgIHRoaXMudGltZSArPSBkZWx0YXRpbWUgLyAxMDAwO1xuICAgICAgICB9XG4gICAgfVxuXG59XG4iLCIvLyBsb3RzIG9mIGFwcHJvYWNoIGluIGJpbmFyeSBwcm9jZXNzaW5nIGhlcmUgc3RvbGVuIGZyb20gQmFieWxvblxuLy8gaHR0cHM6Ly9naXRodWIuY29tL0JhYnlsb25KUy9CYWJ5bG9uLmpzL3RyZWUvbWFzdGVyL2xvYWRlcnMvc3JjL2dsVEYvMi4wXG5cbi8vIE9ubHkgc3VwcG9ydHMgbWFzaGluZyB0aGUgYW5pbWF0aW9uIGJ1ZmZlciBwaWVjZXMgaW50byB0aGUgR0xURiBvYmplY3QgZm9yIG5vd1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIGV4cGxvZGUoZ2x0Zikge1xuICAgICAgICBmb3IgKGxldCBmID0gMDsgZiA8IGdsdGYubm9kZXMubGVuZ3RoOyBmKyspIHtcbiAgICAgICAgICAgIGlmICghZ2x0Zi5ub2Rlc1tmXS5uYW1lKSB7XG4gICAgICAgICAgICAgICAgZ2x0Zi5ub2Rlc1tmXS5uYW1lID0gJ05vZGUgJyArIE51bWJlcihmKzEpICsgJyAodW5uYW1lZCknO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgZ2x0Zi5hbmltYXRpb25zLmxlbmd0aDsgYysrKSB7XG4gICAgICAgICAgICAvLyB3aXJlIHNhbXBsZXIgcmVmZXJlbmNlcyB3aXRoaW4gY2hhbm5lbHMgZm9yIGVhc3kgYWNjZXNzXG4gICAgICAgICAgICBmb3IgKGxldCBkID0gMDsgZCA8IGdsdGYuYW5pbWF0aW9uc1tjXS5jaGFubmVscy5sZW5ndGg7IGQrKykge1xuICAgICAgICAgICAgICAgIGdsdGYuYW5pbWF0aW9uc1tjXS5jaGFubmVsc1tkXS5fc2FtcGxlclJlZiA9IGdsdGYuYW5pbWF0aW9uc1tjXS5zYW1wbGVyc1tnbHRmLmFuaW1hdGlvbnNbY10uY2hhbm5lbHNbZF0uc2FtcGxlcl07XG4gICAgICAgICAgICAgICAgZ2x0Zi5hbmltYXRpb25zW2NdLmNoYW5uZWxzW2RdLl9zYW1wbGVyUmVmLl9jaGFubmVsUmVmID0gZ2x0Zi5hbmltYXRpb25zW2NdLmNoYW5uZWxzW2RdO1xuICAgICAgICAgICAgICAgIGdsdGYuYW5pbWF0aW9uc1tjXS5jaGFubmVsc1tkXS50YXJnZXQuX25vZGVSZWYgPSBnbHRmLm5vZGVzW2dsdGYuYW5pbWF0aW9uc1tjXS5jaGFubmVsc1tkXS50YXJnZXQubm9kZV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGdldCBhY2Nlc3NvciByZWZlcmVuY2VzIGZvciBzYW1wbGVycyBhbmQgcmVzb2x2ZSBkYXRhIGZyb20gYnVmZmVyXG4gICAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IGdsdGYuYW5pbWF0aW9uc1tjXS5zYW1wbGVycy5sZW5ndGg7IGUrKykge1xuICAgICAgICAgICAgICAgZ2x0Zi5hbmltYXRpb25zW2NdLnNhbXBsZXJzW2VdLl9pbnB1dFJlZiA9IGdsdGYuYWNjZXNzb3JzW2dsdGYuYW5pbWF0aW9uc1tjXS5zYW1wbGVyc1tlXS5pbnB1dF07XG5cbiAgICAgICAgICAgICAgIC8vIGZvciBhbmltYXRpb24sIGlucHV0IHJlZmVycyB0byBrZXlmcmFtZSB0aW1lc1xuICAgICAgICAgICAgICAgZ2x0Zi5hbmltYXRpb25zW2NdLnNhbXBsZXJzW2VdLl9pbnB1dFZhbHVlcyA9IHRoaXMuX3Jlc29sdmVBbmltYXRpb25TYW1wbGVyRGF0YSgna2V5ZnJhbWVzJywgZ2x0ZiwgZ2x0Zi5hbmltYXRpb25zW2NdLnNhbXBsZXJzW2VdLl9pbnB1dFJlZik7XG5cblxuICAgICAgICAgICAgICAgLy8gb3V0cHV0IHJlZmVycyB0byBzY2FsZSwgcm90YXRlLCBvciB0cmFuc2xhdGVcbiAgICAgICAgICAgICAgIGdsdGYuYW5pbWF0aW9uc1tjXS5zYW1wbGVyc1tlXS5fb3V0cHV0UmVmID0gZ2x0Zi5hY2Nlc3NvcnNbZ2x0Zi5hbmltYXRpb25zW2NdLnNhbXBsZXJzW2VdLm91dHB1dF07XG4gICAgICAgICAgICAgICBnbHRmLmFuaW1hdGlvbnNbY10uc2FtcGxlcnNbZV0uX291dHB1dFJlZi5fYnVmZmVyVmlld1JlZiA9IGdsdGYuYnVmZmVyVmlld3NbZ2x0Zi5hbmltYXRpb25zW2NdLnNhbXBsZXJzW2VdLl9vdXRwdXRSZWYuYnVmZmVyVmlld107XG5cbiAgICAgICAgICAgICAgIGxldCB0cmFuc2Zvcm1UeXBlID0gZ2x0Zi5hbmltYXRpb25zW2NdLnNhbXBsZXJzW2VdLl9jaGFubmVsUmVmLnRhcmdldC5wYXRoO1xuICAgICAgICAgICAgICAgZ2x0Zi5hbmltYXRpb25zW2NdLnNhbXBsZXJzW2VdLl9vdXRwdXRWYWx1ZXMgPSB0aGlzLl9yZXNvbHZlQW5pbWF0aW9uU2FtcGxlckRhdGEodHJhbnNmb3JtVHlwZSwgZ2x0ZiwgZ2x0Zi5hbmltYXRpb25zW2NdLnNhbXBsZXJzW2VdLl9vdXRwdXRSZWYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnbHRmO1xuICAgIH0sXG5cbiAgICBfcmVzb2x2ZUFuaW1hdGlvblNhbXBsZXJEYXRhKHR5cGUsIGdsdGYsIHNhbXBsZXJEYXRhKSB7XG4gICAgICAgIGxldCBidWZmZXJWaWV3ID0gZ2x0Zi5idWZmZXJWaWV3c1tzYW1wbGVyRGF0YS5idWZmZXJWaWV3XTtcbiAgICAgICAgbGV0IGJ1ZmZlciA9IGdsdGYuYnVmZmVyc1tidWZmZXJWaWV3LmJ1ZmZlcl0uZGF0YTtcblxuICAgICAgICAvLyBtYXAgYnVmZmVyVmlldyB0byBhY3R1YWwgbWVtIHJlZlxuICAgICAgICBzYW1wbGVyRGF0YS5fYnVmZmVyVmlld1JlZiA9IGJ1ZmZlclZpZXc7XG5cbiAgICAgICAgbGV0IGJ5dGVPZmZzZXQgPSBidWZmZXJWaWV3LmJ5dGVPZmZzZXQ7XG4gICAgICAgIGlmIChzYW1wbGVyRGF0YS5ieXRlT2Zmc2V0KSB7XG4gICAgICAgICAgICBieXRlT2Zmc2V0ICs9IHNhbXBsZXJEYXRhLmJ5dGVPZmZzZXQ7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGJ5dGVMZW5ndGggPSBzYW1wbGVyRGF0YS5jb3VudCAqIHRoaXMuX2dldEJ5dGVTdHJpZGVGcm9tVHlwZShzYW1wbGVyRGF0YSk7XG4gICAgICAgIGxldCB2YWx1ZXMgPSB0aGlzLl9wYXJzZUJ1ZmZlckRhdGEoYnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoLCBzYW1wbGVyRGF0YS5jb21wb25lbnRUeXBlKTtcblxuICAgICAgICBpZiAodHlwZSA9PT0gJ2tleWZyYW1lcycpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgY291bnRlciA9IDA7XG4gICAgICAgICAgICBsZXQgdHJhbnNmb3JtcyA9IFtdO1xuICAgICAgICAgICAgbGV0IHZlYztcblxuICAgICAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCB2YWx1ZXMubGVuZ3RoOyBjKyspIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGNvdW50ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3Jtcy5wdXNoKHt9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlYyA9IHRyYW5zZm9ybXNbdHJhbnNmb3Jtcy5sZW5ndGgtMV07XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZWMueCA9IHZhbHVlc1tjXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXIgKys7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZWMueSA9IHZhbHVlc1tjXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXIgKys7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZWMueiA9IHZhbHVlc1tjXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY291bnRlciArKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlICE9PSAncm90YXRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnRlciA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZWMudyA9IHZhbHVlc1tjXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50ZXIgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRyYW5zZm9ybXM7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgX2dldEJ5dGVTdHJpZGVGcm9tVHlwZShhY2Nlc3Nvcikge1xuICAgICAgICBzd2l0Y2ggKGFjY2Vzc29yLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJTQ0FMQVJcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIGNhc2UgXCJWRUMyXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDI7XG4gICAgICAgICAgICBjYXNlIFwiVkVDM1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiAzO1xuICAgICAgICAgICAgY2FzZSBcIlZFQzRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gNDtcbiAgICAgICAgICAgIGNhc2UgXCJNQVQyXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDQ7XG4gICAgICAgICAgICBjYXNlIFwiTUFUM1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiA5O1xuICAgICAgICAgICAgY2FzZSBcIk1BVDRcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gMTY7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkludmFsaWQgYWNjZXNzb3IgdHlwZSAoXCIgKyBhY2Nlc3Nvci50eXBlICsgXCIpXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIF9wYXJzZUJ1ZmZlckRhdGEoYnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoLCBjb21wb25lbnRUeXBlKSB7XG4gICAgICAgIGxldCBidWZmZXJWaWV3RGF0YTtcbiAgICAgICAgc3dpdGNoIChjb21wb25lbnRUeXBlKSB7XG4gICAgICAgICAgICBjYXNlIHRoaXMuRUNvbXBvbmVudFR5cGUuQllURTpcbiAgICAgICAgICAgICAgICBidWZmZXJWaWV3RGF0YSA9IG5ldyBJbnQ4QXJyYXkoYnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgdGhpcy5FQ29tcG9uZW50VHlwZS5VTlNJR05FRF9CWVRFOlxuICAgICAgICAgICAgICAgIGJ1ZmZlclZpZXdEYXRhID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgdGhpcy5FQ29tcG9uZW50VHlwZS5TSE9SVDpcbiAgICAgICAgICAgICAgICBidWZmZXJWaWV3RGF0YSA9IG5ldyBJbnQxNkFycmF5KGJ1ZmZlciwgYnl0ZU9mZnNldCwgYnl0ZUxlbmd0aCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIHRoaXMuRUNvbXBvbmVudFR5cGUuVU5TSUdORURfU0hPUlQ6XG4gICAgICAgICAgICAgICAgYnVmZmVyVmlld0RhdGEgPSBuZXcgVWludDE2QXJyYXkoYnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgdGhpcy5FQ29tcG9uZW50VHlwZS5VTlNJR05FRF9JTlQ6XG4gICAgICAgICAgICAgICAgYnVmZmVyVmlld0RhdGEgPSBuZXcgVWludDMyQXJyYXkoYnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgdGhpcy5FQ29tcG9uZW50VHlwZS5GTE9BVDpcbiAgICAgICAgICAgICAgICBidWZmZXJWaWV3RGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoYnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiSW52YWxpZCBjb21wb25lbnQgdHlwZSAoXCIgKyBjb21wb25lbnRUeXBlICsgXCIpXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYnVmZmVyVmlld0RhdGE7XG4gICAgfSxcblxuICAgIGdlbmVyYXRlVGltZWxpbmUoZ2x0ZkFuaW1zKSB7XG4gICAgICAgIGxldCBzdGFydDtcbiAgICAgICAgbGV0IGVuZDtcbiAgICAgICAgbGV0IHRpbWVsaW5lID0geyBhbmltYXRpb25zOiBbXSB9O1xuICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IGdsdGZBbmltcy5sZW5ndGg7IGMrKykge1xuICAgICAgICAgICAgbGV0IHRyYWNrcyA9IHRoaXMuX2dlbmVyYXRlVHJhY2tzRm9yQW5pbWF0aW9uKGdsdGZBbmltc1tjXSk7XG4gICAgICAgICAgICBpZiAoIXN0YXJ0IHx8IHN0YXJ0ID4gdHJhY2tzLnN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgc3RhcnQgPSB0cmFja3Muc3RhcnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWVuZCB8fCBlbmQgPCB0cmFja3MuZW5kKSB7XG4gICAgICAgICAgICAgICAgZW5kID0gdHJhY2tzLmVuZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRpbWVsaW5lLmFuaW1hdGlvbnMucHVzaCh7IGFuaW1hdGlvbjogdHJhY2tzIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGltZWxpbmUuc3RhcnQgPSBzdGFydDtcbiAgICAgICAgdGltZWxpbmUuZW5kID0gZW5kO1xuICAgICAgICB0aW1lbGluZS5kdXJhdGlvbiA9IGVuZCAtIHN0YXJ0O1xuICAgICAgICByZXR1cm4gdGltZWxpbmU7XG4gICAgfSxcblxuICAgIF9nZW5lcmF0ZVRyYWNrc0ZvckFuaW1hdGlvbihhbmltYXRpb24pIHtcbiAgICAgICAgbGV0IHRyYWNrcyA9IHt9O1xuICAgICAgICBsZXQgc3RhcnRUaW1lID0gLTE7XG4gICAgICAgIGxldCBlbmRUaW1lID0gLTE7XG4gICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgYW5pbWF0aW9uLmNoYW5uZWxzLmxlbmd0aDsgYysrKSB7XG4gICAgICAgICAgICBpZiAoIXRyYWNrc1thbmltYXRpb24uY2hhbm5lbHNbY10udGFyZ2V0Ll9ub2RlUmVmLm5hbWVdKSB7XG4gICAgICAgICAgICAgICAgdHJhY2tzW2FuaW1hdGlvbi5jaGFubmVsc1tjXS50YXJnZXQuX25vZGVSZWYubmFtZV0gPSBbXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGN1cnJlbnRDaGFubmVsID0gdHJhY2tzW2FuaW1hdGlvbi5jaGFubmVsc1tjXS50YXJnZXQuX25vZGVSZWYubmFtZV07XG5cbiAgICAgICAgICAgIGZvciAobGV0IGQgPSAwOyBkIDwgYW5pbWF0aW9uLmNoYW5uZWxzW2NdLl9zYW1wbGVyUmVmLl9pbnB1dFZhbHVlcy5sZW5ndGg7IGQrKykge1xuICAgICAgICAgICAgICAgIGxldCB0aW1lID0gYW5pbWF0aW9uLmNoYW5uZWxzW2NdLl9zYW1wbGVyUmVmLl9pbnB1dFZhbHVlc1tkXTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhcnRUaW1lID09PSAtMSB8fCB0aW1lIDwgc3RhcnRUaW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0VGltZSA9IHRpbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChlbmRUaW1lID09PSAtMSB8fCB0aW1lID4gZW5kVGltZSkge1xuICAgICAgICAgICAgICAgICAgICBlbmRUaW1lID0gdGltZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsZXQga2V5ZnJhbWU7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCBjdXJyZW50Q2hhbm5lbC5sZW5ndGg7IGUrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYW5uZWxbZV0udGltZSA9PT0gdGltZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5ZnJhbWUgPSBjdXJyZW50Q2hhbm5lbFtlXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWtleWZyYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGtleWZyYW1lID0geyB0aW1lOiB0aW1lLCB0cmFuc2Zvcm06IHt9LCBuYW1lOiBhbmltYXRpb24uY2hhbm5lbHNbY10udGFyZ2V0Ll9ub2RlUmVmLm5hbWUgfTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYW5uZWwucHVzaChrZXlmcmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbGV0IHRyYW5zZm9ybVR5cGUgPSBhbmltYXRpb24uY2hhbm5lbHNbY10udGFyZ2V0LnBhdGg7XG4gICAgICAgICAgICAgICAga2V5ZnJhbWUudHJhbnNmb3JtW3RyYW5zZm9ybVR5cGVdID0gYW5pbWF0aW9uLmNoYW5uZWxzW2NdLl9zYW1wbGVyUmVmLl9vdXRwdXRWYWx1ZXNbZF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4geyBzdGFydDogc3RhcnRUaW1lLCBlbmQ6IGVuZFRpbWUsIGR1cmF0aW9uOiBlbmRUaW1lLXN0YXJ0VGltZSwgdHJhY2tzOiB0cmFja3MgfTtcbiAgICB9LFxuXG4gICAgRUNvbXBvbmVudFR5cGU6IHtcbiAgICAgICAgQllURTogNTEyMCxcbiAgICAgICAgVU5TSUdORURfQllURTogNTEyMSxcbiAgICAgICAgU0hPUlQ6IDUxMjIsXG4gICAgICAgIFVOU0lHTkVEX1NIT1JUOiA1MTIzLFxuICAgICAgICBVTlNJR05FRF9JTlQ6IDUxMjUsXG4gICAgICAgIEZMT0FUOiA1MTI2XG4gICAgfVxufVxuIiwiaW1wb3J0IEdMVEZFeHBsb2RlciBmcm9tICcuL2dsdGZleHBsb2Rlci5qcyc7XG5pbXBvcnQgRXZlbnRMaXN0ZW5lciBmcm9tICcuLi8uLi9ub2RlX21vZHVsZXMvbWFjZ3l2ci9zcmMvdXRpbHMvZXZlbnRsaXN0ZW5lci5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdMVEZGaWxlTG9hZGVyIGV4dGVuZHMgRXZlbnRMaXN0ZW5lciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuYnVmZmVyRGljdGlvbmFyeSA9IHt9O1xuICAgICAgICB0aGlzLmJ1ZmZlckNvdW50ID0gMDtcbiAgICB9XG5cbiAgICBsb2FkTG9jYWwoZmlsZXJlZnMpIHtcbiAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCBmaWxlcmVmcy5sZW5ndGg7IGMrKykge1xuICAgICAgICAgICAgbGV0IGZpbGVuYW1lID0gZmlsZXJlZnNbY10ubmFtZTtcbiAgICAgICAgICAgIGlmIChmaWxlbmFtZS5zcGxpdCgnLicpW2ZpbGVuYW1lLnNwbGl0KCcuJykubGVuZ3RoLTFdLnRvTG93ZXJDYXNlKCkgPT09ICdiaW4nKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5idWZmZXJDb3VudCArKztcbiAgICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25CaW5Mb2FkZWQoZmlsZW5hbWUsIGUpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGVyZWZzW2NdKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmlsZW5hbWUuc3BsaXQoJy4nKVtmaWxlbmFtZS5zcGxpdCgnLicpLmxlbmd0aC0xXS50b0xvd2VyQ2FzZSgpID09PSAnZ2x0ZicpIHtcbiAgICAgICAgICAgICAgICBsZXQgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgICAgICAgICByZWFkZXIub25sb2FkID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25HTFRGTG9hZGVkKGZpbGVuYW1lLCBlKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZXJlZnNbY10pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgbG9hZFJlbW90ZShwYXRoKSB7XG4gICAgICAgIHRoaXMuX2ZpbGVuYW1lID0gcGF0aC5zcGxpdCgnLycpW3BhdGguc3BsaXQoJy8nKS5sZW5ndGgtMV07XG4gICAgICAgIHRoaXMuX2Jhc2VwYXRoID0gcGF0aC5zdWJzdHIoMCwgcGF0aC5pbmRleE9mKHRoaXMuX2ZpbGVuYW1lKSk7XG4gICAgICAgIGxldCBsb2FkZXIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgbG9hZGVyLm9wZW4oJ0dFVCcsIHBhdGgsIHRydWUpO1xuICAgICAgICBsb2FkZXIub25sb2FkID0gZGF0YSA9PiB7XG4gICAgICAgICAgICB0aGlzLmdsdGYgPSBKU09OLnBhcnNlKGxvYWRlci5yZXNwb25zZSk7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlcnMgPSB0aGlzLmdsdGYuYnVmZmVycztcbiAgICAgICAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgdGhpcy5idWZmZXJzLmxlbmd0aDsgYysrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5idWZmZXJDb3VudCArKztcbiAgICAgICAgICAgICAgICBsZXQgbG9hZGVyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgbG9hZGVyLnJlc3BvbnNlVHlwZSA9ICdhcnJheWJ1ZmZlcic7XG4gICAgICAgICAgICAgICAgbG9hZGVyLm9wZW4oJ0dFVCcsIHRoaXMuX2Jhc2VwYXRoICsgdGhpcy5idWZmZXJzW2NdLnVyaSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgbG9hZGVyLm9ubG9hZCA9IGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQmluTG9hZGVkKHRoaXMuYnVmZmVyc1tjXS51cmksIGUpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgbG9hZGVyLnNlbmQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgbG9hZGVyLnNlbmQoKTtcbiAgICB9XG5cbiAgICBvbkdMVEZMb2FkZWQoZmlsZW5hbWUsIGUpIHtcbiAgICAgICAgdGhpcy5nbHRmID0gSlNPTi5wYXJzZShlLnRhcmdldC5yZXN1bHQpO1xuICAgICAgICBsZXQgbG9hZGVkID0gdGhpcy5jaGVja0xvYWRlZEZpbGVzKCk7XG4gICAgICAgIGlmIChsb2FkZWQpIHtcbiAgICAgICAgICAgIHRoaXMub25Mb2FkQ29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uQmluTG9hZGVkKGZpbGVuYW1lLCBlKSB7XG4gICAgICAgIGlmIChlLnRhcmdldC5yZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyRGljdGlvbmFyeVtmaWxlbmFtZV0gPSBlLnRhcmdldC5yZXN1bHQ7XG4gICAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXQucmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyRGljdGlvbmFyeVtmaWxlbmFtZV0gPSBlLnRhcmdldC5yZXNwb25zZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihmaWxlbmFtZSArICcgY2Fubm90IGJlIGxvYWRlZCcsIGUudGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbG9hZGVkID0gdGhpcy5jaGVja0xvYWRlZEZpbGVzKCk7XG4gICAgICAgIGlmIChsb2FkZWQpIHtcbiAgICAgICAgICAgIHRoaXMub25Mb2FkQ29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uTG9hZENvbXBsZXRlKCkge1xuICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IHRoaXMuZ2x0Zi5idWZmZXJzLmxlbmd0aDsgYysrKSB7XG4gICAgICAgICAgICB0aGlzLmdsdGYuYnVmZmVyc1tjXS5kYXRhID0gdGhpcy5idWZmZXJEaWN0aW9uYXJ5W3RoaXMuZ2x0Zi5idWZmZXJzW2NdLnVyaV07XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmdsdGYgPSBHTFRGRXhwbG9kZXIuZXhwbG9kZSh0aGlzLmdsdGYpO1xuICAgICAgICB0aGlzLnRyaWdnZXJFdmVudChHTFRGRmlsZUxvYWRlci5MT0FERUQsIHsgZ2x0ZjogdGhpcy5nbHRmIH0pO1xuICAgIH1cblxuICAgIGNoZWNrTG9hZGVkRmlsZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLmdsdGYgJiYgdGhpcy5idWZmZXJDb3VudCA9PT0gT2JqZWN0LmtleXModGhpcy5idWZmZXJEaWN0aW9uYXJ5KS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5HTFRGRmlsZUxvYWRlci5MT0FERUQgPSAnb25HTFRGTG9hZGVkJztcbiIsImltcG9ydCBCYXNlR3JvdXAgZnJvbSAnLi4vLi4vbm9kZV9tb2R1bGVzL21hY2d5dnIvc3JjL2Jhc2Vncm91cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdMVEZPYmplY3QgZXh0ZW5kcyBCYXNlR3JvdXAge1xuICAgIC8qKlxuICAgICAqIG9uIGNyZWF0ZSBzY2VuZVxuICAgICAqIEBwYXJhbSBzY2VuZVxuICAgICAqIEBwYXJhbSBzY2VuZWluZm9cbiAgICAgKi9cbiAgICBvbkNyZWF0ZShzY2VuZSwgc2NlbmVpbmZvKSB7XG4gICAgICAgIHRoaXMuX2R1cmF0aW9uID0gMDtcbiAgICAgICAgdGhpcy5fY3VycmVudFRpbWUgPSAwO1xuICAgICAgICBCQUJZTE9OLlNjZW5lTG9hZGVyLlNob3dMb2FkaW5nU2NyZWVuID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3VzZVJpZ2h0SGFuZGVkQ29vcmRpbmF0ZXMgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5maWxlc0lucHV0ID0gbmV3IEJBQllMT04uRmlsZXNJbnB1dCh0aGlzLmVuZ2luZSwgdGhpcy5zY2VuZSwgdGhpcy5jYW52YXMsIChzY2VuZWZpbGUsIHNjZW5lKSA9PiB0aGlzLm9uU2NlbmVMb2FkZWQoc2NlbmVmaWxlLCBzY2VuZSkpO1xuICAgIH1cblxuICAgIHNldCB1c2VSaWdodEhhbmRlZFN5c3RlbSh2YWwpIHtcbiAgICAgICAgdGhpcy5fdXNlUmlnaHRIYW5kZWRDb29yZGluYXRlcyA9IHZhbDtcbiAgICAgICAgdGhpcy5zY2VuZS51c2VSaWdodEhhbmRlZFN5c3RlbSA9IHZhbDtcbiAgICB9XG5cbiAgICBsb2FkKHZhbHVlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBsZXQgdXJpID0gdmFsdWU7XG4gICAgICAgICAgICBsZXQgZmlsZW5hbWUgPSB1cmkuc3BsaXQoJy8nKVt1cmkuc3BsaXQoJy8nKS5sZW5ndGgtMV07XG4gICAgICAgICAgICBsZXQgYmFzZXBhdGggPSB1cmkuc3Vic3RyKDAsIHVyaS5pbmRleE9mKGZpbGVuYW1lKSk7XG4gICAgICAgICAgICBsZXQgbG9hZGVyID0gbmV3IEJBQllMT04uQXNzZXRzTWFuYWdlcih0aGlzLnNjZW5lKTtcbiAgICAgICAgICAgIGxvYWRlci51c2VEZWZhdWx0TG9hZGluZ1NjcmVlbiA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IHRhc2sgPSBsb2FkZXIuYWRkTWVzaFRhc2soJ3Rhc2snLCAnJywgYmFzZXBhdGgsIGZpbGVuYW1lKTtcbiAgICAgICAgICAgIHRhc2sub25TdWNjZXNzID0gYXNzZXQgPT4gdGhpcy5vbk1lc2hlc0xvYWRlZChhc3NldCk7XG4gICAgICAgICAgICBsb2FkZXIubG9hZCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IGV2ZW50ID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLmZpbGVzSW5wdXQubG9hZEZpbGVzKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uTWVzaGVzTG9hZGVkKGFzc2V0KSB7XG4gICAgICAgIHRoaXMuYWRkKGFzc2V0LmxvYWRlZE1lc2hlcyk7XG4gICAgICAgIGlmICh0aGlzLl91c2VSaWdodEhhbmRlZENvb3JkaW5hdGVzKSB7XG4gICAgICAgICAgICB0aGlzLmdyb3VwLnJvdGF0aW9uLnggPSBNYXRoLlBJLzI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmdyb3VwLnJvdGF0aW9uLnggPSAtTWF0aC5QSS8yO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJlcGFyZVNjZW5lKHRoaXMuc2NlbmUpO1xuICAgIH1cblxuICAgIG9uU2NlbmVMb2FkZWQoc2NlbmVmaWxlLCBzY2VuZSkge1xuICAgICAgICB0aGlzLmFwcGxpY2F0aW9uLnJlcGxhY2VBbGxTY2VuZXMoc2NlbmUpO1xuICAgICAgICB0aGlzLnByZXBhcmVTY2VuZShzY2VuZSk7XG4gICAgfVxuXG4gICAgcHJlcGFyZVNjZW5lKHNjZW5lKSB7XG4gICAgICAgIC8vIHJlbW92ZSBjYW1lcmEgZnJvbSBzY2VuZSB0byBhZGQgb3VyIG93blxuICAgICAgICBpZiAoc2NlbmUuYWN0aXZlQ2FtZXJhKSB7XG4gICAgICAgICAgICBzY2VuZS5hY3RpdmVDYW1lcmEuZGlzcG9zZSgpO1xuICAgICAgICAgICAgc2NlbmUuYWN0aXZlQ2FtZXJhID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHNjZW5lLmNyZWF0ZURlZmF1bHRDYW1lcmFPckxpZ2h0KHRydWUpO1xuICAgICAgICBzY2VuZS5hY3RpdmVDYW1lcmEuYXR0YWNoQ29udHJvbCh0aGlzLmNhbnZhcyk7XG5cbiAgICAgICAgaWYgKHNjZW5lLmxpZ2h0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuYXBwbGljYXRpb24uYWRkTGlnaHRzKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBwYXVzZSBhbGwgdG8gc3RhcnQgLSBpZiBzeW5jaHJvbm91cywgdGhlIHNjZW5lIGRvZXNuJ3Qgc2VlbSB0byBzaG93IHVwXG4gICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCBzY2VuZS5BbmltYXRhYmxlcy5sZW5ndGg7IGMrKykge1xuICAgICAgICAgICAgICAgIHNjZW5lLkFuaW1hdGFibGVzW2NdLmdvVG9GcmFtZSgwKTtcbiAgICAgICAgICAgICAgICBzY2VuZS5BbmltYXRhYmxlc1tjXS5wYXVzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCA1MCk7XG5cbiAgICAgICAgbGV0IHdvcmxkRXh0ZW5kcyA9IHNjZW5lLmdldFdvcmxkRXh0ZW5kcygpO1xuICAgICAgICBsZXQgc2NlbmVNaWRQb2ludDtcbiAgICAgICAgaWYgKHRoaXMuX3VzZVJpZ2h0SGFuZGVkQ29vcmRpbmF0ZXMpIHtcbiAgICAgICAgICAgIHNjZW5lTWlkUG9pbnQgPSBuZXcgQkFCWUxPTi5WZWN0b3IzKCh3b3JsZEV4dGVuZHMubWF4LnggKyB3b3JsZEV4dGVuZHMubWluLngpLzIsIHdvcmxkRXh0ZW5kcy5tYXgueSwgKHdvcmxkRXh0ZW5kcy5tYXgueiArIHdvcmxkRXh0ZW5kcy5taW4ueikvMik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzY2VuZU1pZFBvaW50ID0gbmV3IEJBQllMT04uVmVjdG9yMygod29ybGRFeHRlbmRzLm1heC54ICsgd29ybGRFeHRlbmRzLm1pbi54KS8yLCAod29ybGRFeHRlbmRzLm1heC55ICsgd29ybGRFeHRlbmRzLm1pbi55KS8yLCAod29ybGRFeHRlbmRzLm1heC56ICsgd29ybGRFeHRlbmRzLm1pbi56KS8yKTtcbiAgICAgICAgfVxuICAgICAgICBzY2VuZS5hY3RpdmVDYW1lcmEuc2V0VGFyZ2V0KCBzY2VuZU1pZFBvaW50ICk7XG4gICAgfVxuXG4gICAgc2V0IGR1cmF0aW9uKGR1cikge1xuICAgICAgICB0aGlzLl9kdXJhdGlvbiA9IGR1cjtcbiAgICB9XG5cbiAgICBnZXQgZHVyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kdXJhdGlvbjtcbiAgICB9XG5cbiAgICBzZXQgdGltZSh0KSB7XG4gICAgICAgIHQgPSB0ICUgdGhpcy5kdXJhdGlvbjtcbiAgICAgICAgdGhpcy5fY3VycmVudFRpbWUgPSB0O1xuICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IHRoaXMuc2NlbmUuQW5pbWF0YWJsZXMubGVuZ3RoOyBjKyspIHtcbiAgICAgICAgICAgIHRoaXMuc2NlbmUuQW5pbWF0YWJsZXNbY10uZ29Ub0ZyYW1lKHQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdG9nZ2xlVmlzaWJpbGl0eSh2aXNpYmxlLCBuYW1lKSB7XG4gICAgICAgIGxldCBtaWxsaXNlY29uZHMgPSB0aGlzLnNjZW5lLl9hbmltYXRpb25UaW1lO1xuICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IHRoaXMuc2NlbmUuQW5pbWF0YWJsZXMubGVuZ3RoOyBjKyspIHtcbiAgICAgICAgICAgIC8vbGV0IGZyYW1lUmF0ZSA9IHRoaXMuc2NlbmUuQW5pbWF0YWJsZXNbY10uX2FuaW1hdGlvbnNbMF0uZnJhbWVQZXJTZWNvbmQ7XG4gICAgICAgICAgICBpZiAodGhpcy5zY2VuZS5BbmltYXRhYmxlc1tjXS50YXJnZXQubmFtZSA9PT0gbmFtZSkge1xuICAgICAgICAgICAgICAgIGlmICh2aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NlbmUuQW5pbWF0YWJsZXNbY10ucmVzdGFydCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLkFuaW1hdGFibGVzW2NdLmdvVG9GcmFtZSgxMClcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLkFuaW1hdGFibGVzW2NdLnBhdXNlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25SZW5kZXIoZGVsdGF0aW1lKSB7fVxufVxuIl19"}